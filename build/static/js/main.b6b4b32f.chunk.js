(this["webpackJsonpmusic-app"]=this["webpackJsonpmusic-app"]||[]).push([[0],{29:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(23),s=a.n(c),r=(a(29),a(11)),o=a(12),i=a(3),l=Object(n.createContext)(),u="[auth] get token",j="[categories] set lists of categories",d="[categories] set active category",b="[playlists] get lists of playlists",p="[playlists] set active playlist",h="[playlists] deactivate selected",O="[songs] set songs",g="[songs] set active song",m="[songs] songs is loading",f="[songs] clear songs",x=a(0),v=function(e){var t=e.name,a=e.imgUrl,c=e.id,s=Object(n.useContext)(l).categoriesDispatch;return Object(x.jsxs)("div",{className:"category-card hvr-grow",style:{backgroundImage:'url("'.concat(a,'")')},children:[Object(x.jsx)("h2",{children:t}),Object(x.jsx)(o.b,{onClick:function(){localStorage.setItem("categoryId",c),localStorage.setItem("categoryName",t),s({type:d,payload:{id:c,name:t}})},className:"link",to:"/playlists/".concat(c),children:"More..."})]})},y=a(9),k=Object(n.createContext)(),w=a(5),N=a.n(w),S=a(8),C=function(){var e=Object(S.a)(N.a.mark((function e(){var t,a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa("e0464f06b92e43eaa958c219757907ab:16bced7e2e5f4c55972433ce698828ec")},body:"grant_type=client_credentials"});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,n=a.access_token,localStorage.setItem("authToken",n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(S.a)(N.a.mark((function e(){var t,a,n,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return t=e.sent,e.next=5,fetch("https://api.spotify.com/v1/browse/categories",{method:"GEt",headers:{Authorization:"Bearer ".concat(t)}});case 5:return a=e.sent,e.next=8,a.json();case 8:return n=e.sent,c=n.categories,e.abrupt("return",{token:t,categories:c.items});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){return{type:u,payload:e}},A=function(){var e=function(){var e=Object(n.useState)({categories:[]}),t=Object(r.a)(e,2),a=t[0],c=t[1],s=Object(n.useContext)(k).authDispatch;return Object(n.useEffect)((function(){_().then((function(e){s(I(e.token)),c({categories:Object(y.a)(e.categories)})}))}),[s]),a}().categories;return Object(x.jsx)("div",{className:"category-container",children:e.slice(12).map((function(e){var t=e.name,a=e.id,n=e.icons;return Object(x.jsx)(v,{name:t,imgUrl:n[0].url,id:a},a)}))})},E=function(){return Object(x.jsxs)("footer",{className:"footer",children:[Object(x.jsx)("a",{href:"https://github.com/AlejoVE",target:"_blank",rel:"noreferrer",children:Object(x.jsx)("img",{src:"https://user-images.githubusercontent.com/59319966/109864628-584d4e80-7c63-11eb-9f1a-4afed77758ce.png",alt:"github logo"})}),Object(x.jsx)("p",{children:"Alejandro Montilla \xa92021"})]})},D=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"main-container animate__animated animate__fadeIn",children:[Object(x.jsx)("div",{className:"header-container",children:Object(x.jsx)("img",{className:"header-img",src:"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_CMYK_Black.png",alt:"Spotify logo"})}),Object(x.jsx)(A,{}),Object(x.jsx)(E,{})]})})},P=Object(n.createContext)(),T=function(){return Object(x.jsxs)("div",{className:"not-selected-container animate__animated animate__fadeIn",children:[Object(x.jsx)("h2",{children:"Please select a Playlist"}),Object(x.jsx)("img",{src:"https://www.freepnglogos.com/uploads/spotify-logo-png/file-spotify-logo-png-4.png",alt:"Spotify logo"})]})},B=function(){var e=Object(S.a)(N.a.mark((function e(t,a){var n,c,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,5,e.next=4,fetch("".concat("https://api.spotify.com/v1/browse/categories","/").concat(a,"/playlists?limit=").concat(5),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(c=e.sent,void 0!==(s=c.playlists)){e.next=11;break}return e.abrupt("return",[]);case 11:return e.abrupt("return",s.items);case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),M=Object(n.createContext)(),L=function(e){var t=e.value,a=e.id,c=Object(n.useContext)(P).playlistDispatch;return Object(x.jsx)("button",{className:"btn hvr-grow",onClick:function(){c({type:p,payload:a})},children:t})},z=function(e){var t=e.name,a=e.description,n=e.tracks,c=e.id;return Object(x.jsxs)("li",{className:"li-element",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:t}),Object(x.jsx)("p",{children:a}),Object(x.jsxs)("em",{children:["Number of songs: ",n.total]})]}),Object(x.jsx)(L,{value:"See songs >>>",id:c})]})},R=function(e){var t=e.history,a=Object(n.useContext)(k).authState,c=Object(n.useContext)(P).playlistDispatch,s=Object(n.useContext)(M).songsDispatch,o=a.token,i=Object(n.useContext)(l).activeCategory.activeCategory,u=i.id,j=i.name,d=localStorage.getItem("categoryId")||u,b=localStorage.getItem("categoryName")||j,p=function(e,t){var a=Object(n.useState)({playlists:[]}),c=Object(r.a)(a,2),s=c[0],o=c[1];return Object(n.useEffect)((function(){B(e,t).then((function(e){o({playlists:Object(y.a)(e)})}))}),[t,e]),s}(o,d).playlists;return Object(x.jsxs)("div",{className:"playlists-container ",children:[Object(x.jsx)("div",{className:"header",children:Object(x.jsx)("h2",{children:b})}),Object(x.jsx)("ul",{className:"list",children:p.map((function(e){var t=e.id,a=e.name,n=e.description,c=e.tracks;return Object(x.jsx)(z,{name:a,description:n,tracks:c,id:t},t)}))}),Object(x.jsx)("button",{className:"goBack hvr-grow",onClick:function(){c({type:h}),s({type:f}),t.push("/")},children:"< Go back"})]})},Y=function(){var e=Object(S.a)(N.a.mark((function e(t,a){var n,c,s,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 100,e.prev=1,e.next=4,fetch("".concat("https://api.spotify.com/v1/playlists","/").concat(a,"/tracks?limit=").concat(100),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 4:return n=e.sent,e.next=7,n.json();case 7:return c=e.sent,s=c.items,r=[],s.forEach((function(e){var t=e.track,a=t.album,n=t.artists,c=t.id,s=t.name;r.push({album:a,artists:n,id:c,name:s})})),e.abrupt("return",r);case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a){return e.apply(this,arguments)}}(),Z=function(e){return{type:O,payload:e}},G=function(e){var t=e.name,a=e.artists,c=e.album,s=e.id,r=e.index,l=localStorage.getItem("categoryName"),u=Object(n.useContext)(M).songsDispatch,j=Object(i.f)();return Object(x.jsx)("li",{className:"hvr-mine animate__animated animate__fadeIn",onClick:function(){u({type:g,payload:{name:t,artists:a,album:c,id:s}}),j.replace("/playlists/".concat(l,"/song"))},children:Object(x.jsx)(o.b,{to:"/playlists/".concat(l,"/song"),children:"".concat(r,".                ").concat(t)})})},V=function(){var e=Object(n.useContext)(P).playlistsState.activePlaylistId;!function(e,t){var a=Object(n.useContext)(M).songsDispatch,c=Object(n.useState)({songs:[]}),s=Object(r.a)(c,2),o=s[0],i=s[1];Object(n.useEffect)((function(){Y(e,t).then((function(e){a(Z(e)),i({songs:Object(y.a)(e)})}))}),[t,a,e])}(Object(n.useContext)(k).authState.token,e);var t=Object(n.useContext)(M),a=t.songsState,c=t.songsDispatch,s=a.songsIsLoading,o=a.songs;return Object(n.useEffect)((function(){c({type:O,payload:o})}),[e,c]),Object(x.jsx)("div",{className:"songs-container",children:Object(x.jsx)("ul",{children:s?Object(x.jsx)("h2",{children:"Loading..."}):o.map((function(e,t){var a=e.name,n=e.album,c=e.artists,s=e.id;return Object(x.jsx)(G,{name:a,album:n,artists:c,id:s,index:t+1},s)}))})})},J=function(e){var t=e.history,a=Object(n.useContext)(P).playlistsState.isSelected;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"playlists-screen-container",children:[Object(x.jsx)(R,{history:t}),a?Object(x.jsx)(V,{}):Object(x.jsx)(T,{})]})})},Q=a(21),U=a.n(Q),W=function(){var e=Object(S.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://accounts.spotify.com/api/token",{body:"grant_type=refresh_token&refresh_token=".concat("AQBjLvoOLQkYJeQx4HY033dXZBmbk8v3Jb_PykVhOsdE1n9I0Z6jxEgmcSeQi9pBSvRwuZWT9wEH33oMjKrgYv2teiSrSe2shgVbz8v0immvMy7jrxnfkaRldwuduW3-2qY"),headers:{Authorization:"Basic ".concat("ZTA0NjRmMDZiOTJlNDNlYWE5NThjMjE5NzU3OTA3YWI6MTZiY2VkN2UyZTVmNGM1NTk3MjQzM2NlNjk4ODI4ZWM="),"Content-Type":"application/x-www-form-urlencoded"},method:"POST"});case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(S.a)(N.a.mark((function e(t){var a,n,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return a=e.sent,n=a.access_token,c=encodeURIComponent("spotify:track:".concat(t)),e.prev=5,e.next=8,fetch("".concat("https://api.spotify.com/v1/playlists/4qhYOIILXPZGcwOAOd9Vt6/","tracks?uris=").concat(c),{method:"POST",headers:{Authorization:"Bearer ".concat(n)}});case 8:U.a.fire("Good choice!","Check your playlist ;)","success"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),U.a.fire("Error","Sorry, there was an error, try later","error"),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.f)(),t=Object(n.useContext)(M).songsState.activeSong,a=t.album,c=t.id,s=t.name,r=t.artists,o=a.images,l=a.name,u=a.release_date,j=localStorage.getItem("categoryName");console.log("Album",a);var d=function(e){var t=[];return e.forEach((function(e){return t.push(e.name)})),t.join(", ")}(r);console.log(d);return Object(x.jsxs)("div",{className:"song-screen-container animate__animated animate__fadeInLeft animate__faster",children:[Object(x.jsxs)("div",{className:"song-card-container ",children:[Object(x.jsx)("img",{src:"".concat(o[0].url),alt:"Album cover"}),Object(x.jsxs)("div",{className:"song-description-container",children:[Object(x.jsx)("div",{className:"song-header",children:Object(x.jsx)("h2",{children:s})}),Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:["Artists: ",d]}),Object(x.jsxs)("li",{children:["Album: ",l]}),Object(x.jsxs)("li",{children:["Release date: ",u]})]}),Object(x.jsxs)("div",{className:"buttons-container",children:[Object(x.jsx)("button",{className:"go-back hvr-grow",onClick:function(){e.push("/playlists/".concat(j))},children:"< Go back"}),Object(x.jsx)("button",{className:"button hvr-grow",onClick:function(){q(c)},children:"Add song to Playlist"})]})]})]}),Object(x.jsx)(E,{})]})},H=function(){return Object(x.jsx)(o.a,{children:Object(x.jsx)("div",{children:Object(x.jsxs)(i.c,{children:[Object(x.jsx)(i.a,{exact:!0,path:"/main",component:D}),Object(x.jsx)(i.a,{exact:!0,path:"/playlists/:name",component:J}),Object(x.jsx)(i.a,{exact:!0,path:"/playlists/:name/song",component:F}),Object(x.jsx)(i.a,{exact:!0,path:"/",component:D})]})})})},K=a(2),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(K.a)(Object(K.a)({},e),{},{playlists:Object(y.a)(t.payload)});case p:return Object(K.a)(Object(K.a)({},e),{},{activePlaylistId:t.payload,isSelected:!0});case h:return Object(K.a)(Object(K.a)({},e),{},{isSelected:!1});default:return e}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(K.a)(Object(K.a)({},e),{},{categories:Object(y.a)(t.payload)});case d:return Object(K.a)(Object(K.a)({},e),{},{activeCategory:t.payload});default:return e}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(K.a)(Object(K.a)({},e),{},{token:t.payload});default:return e}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(K.a)(Object(K.a)({},e),{},{songs:Object(y.a)(t.payload),songsIsLoading:!1});case m:return Object(K.a)(Object(K.a)({},e),{},{songsIsLoading:!0});case g:return Object(K.a)(Object(K.a)({},e),{},{activeSong:t.payload});case f:return Object(K.a)(Object(K.a)({},e),{},{songs:[]});default:return e}},ae=function(){return{activePlaylistId:"",isSelected:!1}},ne=function(){return{activeCategory:""}},ce=function(){return{token:""}},se=function(){return{songs:[],songsIsLoading:!0,activeSong:{}}},re=function(){var e=Object(n.useReducer)(X,{},ae),t=Object(r.a)(e,2),a=t[0],c=t[1],s=Object(n.useReducer)($,{},ne),o=Object(r.a)(s,2),i=o[0],u=o[1],j=Object(n.useReducer)(ee,{},ce),d=Object(r.a)(j,2),b=d[0],p=d[1],h=Object(n.useReducer)(te,{},se),O=Object(r.a)(h,2),g=O[0],m=O[1];return Object(x.jsx)(k.Provider,{value:{authState:b,authDispatch:p},children:Object(x.jsx)(M.Provider,{value:{songsState:g,songsDispatch:m},children:Object(x.jsx)(l.Provider,{value:{activeCategory:i,categoriesDispatch:u},children:Object(x.jsx)(P.Provider,{value:{playlistsState:a,playlistDispatch:c},children:Object(x.jsx)(H,{})})})})})};s.a.render(Object(x.jsx)(re,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.b6b4b32f.chunk.js.map